## 课程目标

1. 通过对本质内容学历，可以掌握Spring的基本架构及各子模块之间的依赖关系。
2. 了解Spring的发展历史，启发思维
3. 对Spring形成一个整体的认识，为之后的深入学习做铺垫
4. 通过对本章内容的学习，可以了解Spring版本升级的规律，从而应用到自己的系统升级版本命名。
5. Spring编程思想总结。

## 内容定位

## Spring的前世今生

2007年，一个基于java语言的开源框架正式发布，取了一个非常有活力且美化的名字，叫做Spring。它是一个开源的请谅解javaSE/javaEE 开发应用框架，其目的是用于简化企业级应用程序开发。应用程序是由一组相互协作的对象组成。所以开发一个应用除了要开发业务逻辑之外，最多的是关注如何使这些对象协作来完成所需功能，而且要低耦合、高内聚。业务逻辑开发是不可避免的，那如果有个框架出来帮我们来创建对象及管理这些对象之间的依赖关系。可能有人说，比如“抽象工厂、工厂方法“不也可以帮我们创建对象，”生成器模式“帮我们处理对象间的依赖关系，不也能完成这些功能吗？可是这些又需要我们创建另一些工厂类、生成器，我们由内而外管理这些类，增加了我们的负担，如果能有种通过配置方式来创建对象，管理对象之间依赖关系，我们不需要通过工厂和生成器来创建及管理对象之间的依赖关系， 这样我们是不是减少了许多工作，加速了开发，能节省出很多时间来干其他事。Spring框架刚出来的时候主要就是来完成这个功能。

​		Spring框架除了帮我们管理对象及其依赖关系，还提供像通用日志记录、性能统计、安全控制、异常处理等面向切面的能力，还能帮我管理最头疼的数据库事务，本身提供了一套简单的JDBC访问实现，提供与第三方数据访问框架集成（如Hibernate/jpa），与各种JavaEE技术整合（如：Java Mail /任务调度等待），提供了一套自己的web层框架SpringMVC、而且还能非常简单的与第三方web框架集成。从这里我们可以认为Spring是一个超级粘合大平台，除了自己提供功能外，还提供粘合其他技术和框架能力，从而使我们可以更自由的选择到底使用寿命技术进行开发。而且不管是JAVA SE(C/S架构)应用程序还是JAVAEE（B/S架构）应用程序都可以使用这个平台进行开发。如今Spring已经不再是一个框架，早已成为了一种生态。SPringBoot的便捷式开发实现了零配置，SpringCloud全家桶，提供了非常方便的解决方案。

## 一切从Bean开始

早在1996年，java还只是一个新兴的、初入茅庐的编程语言。人们之所以关注它仅仅是因为，可以使用java的Applet开发web应用，作为浏览器组件。但开发者们很快就发现这个新兴的语言还能做更多的事情。与之前的所有语言不通，java让模块化构建复杂的系统成为可能（当时的软件行业虽然在业务上突飞猛进，但当时开发用的是传统的面向过程开发思想，软件的开发效率一直踟蹰不前。伴随着业务复杂性的不断加深，开发也变得愈发困难。其实，当时也是OOP思想飞速发展的时期，它在80年代末被提出，成熟于90年代，现在大多数的编程语言已经是面向对象的）。

​		同年12月，Sun公司发布了当时还名不经传但后来人尽皆知的JavaBean 1.00-A规范。早起的JavaBean规范针对于Java，它定义了软件组件模型。这个规范规定了一整套编码策略，使简单的Java对象不仅可以被重用，而且还可以轻松构建更为复杂的应用。 尽管JavaBean最初是为重用应用组件而设计的，但当时他们确实主要用作构建窗体控件，毕竟在PC时代那才是主流。但相比于当时正如日中天的Delphi、VB、C++， 它看起来还是太简易 了，以至于无法胜任任何“实际的”工作需要。

​		复杂的应用通常需要事务、安全、分布式等服务的支持，但JavaBean并未直接提供。所以到了1998年3月，Sun公司发布了EJB1.0规范，该规范把Java组件的设计理念延伸到了服务器端，并提供了许多必须的企业级服务，但他也不再像早期的JavaBean那么简单了。实际上，除了名字叫EJB Bean以外，其他和JavaBean关系不大了。

​		尽管实现中有很多系统是基于EJB构建的，但EJB从来没有实现它最初的设想：简化开发。EJB的声明式编程模型的确简化了很多基础架构层面的开发，例如事务和安全；但另一方面EJB在部署描述符合配套代码实现等方面变得异常复杂。随着时间的推移，很多开发者对EJB已经不再抱有幻想，开始寻求更简洁的方法。

​		现在Java组件开发理念重新回归正轨。新的编程技术AOP和DI的不断出现， 他们为JavaBean提供了之前EJB才能拥有的强大功能。这些技术为POJO提供了类似EJB的声明式编程模型，而没有引入任何EJB的复杂性。当简单的Javabean足以胜任时，人民便不愿编写笨重的EJB组件了。

​		客观地讲，EJB的发展甚至促进了基于POJO的编程模型。引入新的理念，最新的EJB规范相比之前的规范有了前所未有的简化，但对很多开发者而言，这一切来得太迟。道路EJB3规范发布时，其他基于POJO的开发架构已经成为事实标准了，而Spring框架也就是在这样的大环境下出现的。

## Spring设计初衷

​		Spring是为解决企业级应用开发的复杂性而设计，它可以做很多事。但归根结底支撑Spring的仅仅是少许的基本理念，而所有的这些基本理念都可能可以追溯到一个最根本的使命：简化开发。而Spring则立志于全方面的简化Java开发。

对此，它主要采取了4个关键策略：

1. 基于POJO的轻量级和最小侵入性编程；
2. 通过依赖注入和面向接口松耦合
3. 基于切面和惯性进行声明式编程；
4. 通过切面和模板减少样板式代码；

而它主要是通过：面向Bean(BOP)、依赖注入（DI)以及面向切面（AOP）这三种方式来达成的。

## BOP编程伊始

​		Spring是面向Bean的编程（Bean Oriented Programming，BOP) ， Bean在Spring中才是真正的主角。Bean在Spring中作用就像Object对OOP的意义一样，Spring中没有Bean也就没有Spring存在的意义。 Spring提供了IoC容器通过配置文件或者注解的方式来管理对象之间的依赖关系。

​		控制反转（其中最常见的实现方式叫做依赖注入（Dependency Injection , DI），还有一种方式叫“依赖查找” （Dependency LookUp，DL），它在C++ 、 java 、 PHP以及.NET中都运用。在最早的Spring中是包含有依赖注入方法和依赖查询的， 但因为依赖查询使用频率过低， 不久就被Spring移除了， 所以在SPring中控制反转也被直接称作依赖注入），它的基本概念是：不创建对象，但是描述创建它们的方式。 在代码中不直接与对象和服务连接， 但在配置文件中描述哪一个组件需要哪一项服务。 容器（在Spring框架中是IoC容器）负责将这些联系在一起。

​		在典型的IoC场景中， 容器创建了所有对象， 并设置必要的数学将它们连接在一起，决定什么时间调用方法。

## 依赖注入的基本概念

​			Spring设计的核心org.springframework.beans 包（架构核心是org.springframework.core)，它的设计目标是与JavaBean组件一起使用。这个包通常不是由用户之间使用，而是由服务器将其用作其他多数功能的底层中介。下一个最高级抽象是BeanFactory接口，它是工厂设计模式的实现，允许通过名称创建和检索对象。BeanFactory也可以管理对象之间的关系。

BeanFactory最底层支持两个对象模型。

1. 单例：提供具有特定名称的全局共享实例对象，可以在查询时对其进行检索。Singleton是默认的也是最常用的对象模型。
2. 原型：确保每次检索都会创建单独的实例对象。在每个用户都需要自己对象时，采用原型模式。、、

Bean工厂的概念是Spring作为IoC容器的基础。IoC则将处理事情的责任从应用程序代码转移到框架。 

## AOP编程理念

